include:
  - local: '/.gitlab-ci/.ci-values.yml'
  - project: '$MANAGED_PROJECT'
    ref: '$CI_COMMIT_REF_NAME'
    file: '/.gitlab-ci/.build-gradle-template.yml'
  - project: '$MANAGED_PROJECT'
    ref: '$CI_COMMIT_REF_NAME'
    file: '/.gitlab-ci/.check-sonarqube-template.yml'
  - project: '$MANAGED_PROJECT'
    ref: '$CI_COMMIT_REF_NAME'
    file: '/.gitlab-ci/.build-image-template.yml'
  - project: '$MANAGED_PROJECT'
    ref: '$CI_COMMIT_REF_NAME'
    file: '/.gitlab-ci/.deploy-configmap-template.yml'
  - project: '$MANAGED_PROJECT'
    ref: '$CI_COMMIT_REF_NAME'
    file: '/.gitlab-ci/.deploy-secret-template.yml'
  - project: '$MANAGED_PROJECT'
    ref: '$CI_COMMIT_REF_NAME'
    file: '/.gitlab-ci/.deploy-helm-template.yml'

stages:
  - build
  - docker
  - pre-deploy
  - deploy
